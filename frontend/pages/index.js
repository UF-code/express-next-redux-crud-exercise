import Head from 'next/head'
import Image from 'next/image'
import 'bootstrap/dist/css/bootstrap.min.css'
import { Button } from 'react-bootstrap'
import TableComponent from '../components/table.component.jsx'

// axios
import React from 'react'

//
import { useDispatch } from 'react-redux'
import { addCustomer, getCustomers } from '../redux/customerSlice'

import axios from '../axios.js'

export default function Home() {
    const dispatch = useDispatch()

    axios
        .get(`/getAllCustomers`)
        .then((res) => {
            // console.log(res.status)
            // console.log(res.data)
            // console.log(res.data[0].id)
            // console.log(res.data[0].first_name)
            // console.log(res.data[0].last_name)
            // console.log(res.data[0].email)
            // console.log(res.data[0].birthdate)
            // console.log(res.data[0].createdAt)
            // console.log(res.data[0].updatedAt)
            // customers = [...res.data]
            // console.log(customers)
            dispatch(getCustomers(res.data))
        })
        .catch((err) => console.log(err))

    return (
        <div className='bg-dark vw-100 vh-100 d-flex justify-content-center align-items-center'>
            <Head>
                <title>Create Next App</title>
                <meta name='description' content='Generated by create next app' />
                <link rel='icon' href='/favicon.ico' />
            </Head>

            <main>
                <div className='w-100 d-flex justify-content-center'>
                    <Button
                        variant='success'
                        className='p-3 m-3'
                        onClick={() => {
                            dispatch(
                                addCustomer({
                                    id: 1,
                                    first_name: 'ugur1',
                                    last_name: 'firat1',
                                    email: 'ugur@firat1.com',
                                })
                            )
                        }}
                    >
                        Create New Customer
                    </Button>
                </div>
                <div className='vw-100'>
                    <TableComponent />
                </div>
            </main>
        </div>
    )
}
